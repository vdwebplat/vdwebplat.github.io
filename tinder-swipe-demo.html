<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Tinder Swipe UI Demo</title>
  <style>
    body {
      background: #f7f7f7;
      font-family: sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    #container {
      width: 340px;
      height: 480px;
      position: relative;
    }
    .card {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 18px;
      box-shadow: 0 6px 36px rgba(0,0,0,0.13);
      background: #fff;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      align-items: center;
      transition: transform 0.35s cubic-bezier(.68,-0.55,.27,1.55), opacity 0.35s;
      user-select: none;
      touch-action: none;
      will-change: transform;
    }
    .card img {
      width: 100%;
      height: 80%;
      object-fit: cover;
    }
    .card .name {
      width: 100%;
      background: rgba(255,255,255,0.85);
      padding: 16px;
      text-align: center;
      font-size: 21px;
      font-weight: bold;
      letter-spacing: 1px;
      border-radius: 0 0 18px 18px;
    }
    .card.next {
      opacity: 0.7;
      filter: blur(2px);
      pointer-events: none;
      z-index: 1;
    }
    .card.top {
      z-index: 2;
    }
    .card.swipe-left {
      transform: translateX(-450px) rotate(-18deg);
      opacity: 0;
    }
    .card.swipe-right {
      transform: translateX(450px) rotate(18deg);
      opacity: 0;
    }
    .empty {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 18px;
      box-shadow: 0 6px 36px rgba(0,0,0,0.13);
      background: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 22px;
      font-weight: bold;
      color: #aaa;
      z-index: 3;
    }
  </style>
</head>
<body>
  <div id="container">
    <!-- Cards will be injected by JS -->
    <div class="empty" style="display:none;">No more cards!</div>
  </div>
  <script>
    // Sample static cards
    const cardsData = [
      { img: "https://source.unsplash.com/random/340x340?person1", name: "Alex" },
      { img: "https://source.unsplash.com/random/340x340?person2", name: "Jordan" },
      { img: "https://source.unsplash.com/random/340x340?person3", name: "Taylor" }
    ];

    const container = document.getElementById('container');
    const emptyDiv = container.querySelector('.empty');

    // Render cards
    function renderCards() {
      container.querySelectorAll('.card').forEach(el => el.remove());
      cardsData.forEach((card, idx) => {
        const el = document.createElement('div');
        el.className = 'card' + (idx === 0 ? ' top' : ' next');
        el.innerHTML = `<img src="${card.img}" alt="${card.name}"/><div class="name">${card.name}</div>`;
        if (idx === 0) addSwipeHandlers(el);
        container.appendChild(el);
      });
      if (cardsData.length === 0) emptyDiv.style.display = '';
      else emptyDiv.style.display = 'none';
    }

    // Swipe handlers
    function addSwipeHandlers(cardEl) {
      let startX = null, startY = null, dragging = false;
      let lastDx = 0;

      function onMove(dx, dy) {
        cardEl.style.transform = `translateX(${dx}px) rotate(${dx/12}deg)`;
        lastDx = dx;
      }
      function endSwipe() {
        cardEl.style.transform = "";
        lastDx = 0;
      }

      function onRelease() {
        dragging = false;
        // Swipe threshold: 120px
        if (lastDx > 120) {
          cardEl.classList.add('swipe-right');
          setTimeout(() => { cardsData.shift(); renderCards(); }, 350);
        } else if (lastDx < -120) {
          cardEl.classList.add('swipe-left');
          setTimeout(() => { cardsData.shift(); renderCards(); }, 350);
        } else {
          cardEl.style.transition = 'transform 0.2s';
          cardEl.style.transform = '';
          setTimeout(() => { cardEl.style.transition = ''; }, 200);
        }
      }

      // Mouse
      cardEl.addEventListener('mousedown', e => {
        dragging = true;
        startX = e.clientX;
        startY = e.clientY;
        cardEl.style.transition = 'none';
      });
      window.addEventListener('mousemove', e => {
        if (!dragging) return;
        onMove(e.clientX - startX, e.clientY - startY);
      });
      window.addEventListener('mouseup', e => {
        if (!dragging) return;
        onRelease();
        endSwipe();
      });

      // Touch
      cardEl.addEventListener('touchstart', e => {
        dragging = true;
        const t = e.touches[0];
        startX = t.clientX;
        startY = t.clientY;
        cardEl.style.transition = 'none';
      });
      window.addEventListener('touchmove', e => {
        if (!dragging) return;
        const t = e.touches[0];
        onMove(t.clientX - startX, t.clientY - startY);
      });
      window.addEventListener('touchend', e => {
        if (!dragging) return;
        onRelease();
        endSwipe();
      });
    }

    renderCards();
  </script>
</body>
</html>